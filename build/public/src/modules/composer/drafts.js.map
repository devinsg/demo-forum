{"version":3,"sources":["node_modules/nodebb-plugin-composer-default/static/lib/composer/drafts.js"],"names":["define","drafts","saveThrottleId","init","postContainer","postData","draftIconEl","find","saveThrottle","resetTimeout","setTimeout","saveDraft","on","$","this","toggleClass","window","open","localStorage","getItem","JSON","parse","e","console","warn","length","forEach","save_id","updateVisibility","migrateGuest","clearTimeout","getDraft","get","uid","split","storage","parseInt","sessionStorage","draft","text","key","value","handle","trigger","canSave","app","user","titleEl","title","val","raw","hasOwnProperty","endsWith","cid","removeDraft","replace","setItem","tags","keys","Object","filter","startsWith","removeItem","set","add","idx","indexOf","push","splice","stringify","test","migrated","Set","renamed","map","parts","slice","join","loadOpen","available","saveObj","type","id","require","composer","newTopic","body","socket","emit","err","topicObj","alertError","message","newReply","undefined","editPost","x","DOMException","code","name"],"mappings":"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","file":"node_modules/nodebb-plugin-composer-default/static/lib/composer/drafts.js","sourcesContent":["'use strict';\r\n\r\n/* globals $, window, socket, app, define, localStorage, sessionStorage */\r\n\r\ndefine('composer/drafts', function () {\r\n\tvar drafts = {};\r\n\tvar\tsaveThrottleId;\r\n\r\n\tdrafts.init = function (postContainer, postData) {\r\n\t\tvar draftIconEl = postContainer.find('.draft-icon');\r\n\t\tfunction saveThrottle() {\r\n\t\t\tresetTimeout();\r\n\r\n\t\t\tsaveThrottleId = setTimeout(function () {\r\n\t\t\t\tsaveDraft(postContainer, draftIconEl, postData);\r\n\t\t\t}, 1000);\r\n\t\t}\r\n\r\n\t\tpostContainer.on('keyup', 'textarea, input.handle, input.title', saveThrottle);\r\n\t\tpostContainer.on('click', 'input[type=\"checkbox\"]', saveThrottle);\r\n\r\n\t\tdraftIconEl.on('animationend', function () {\r\n\t\t\t$(this).toggleClass('active', false);\r\n\t\t});\r\n\r\n\t\t$(window).on('unload', function () {\r\n\t\t\t// Update visibility on all open composers\r\n\t\t\tvar open = [];\r\n\t\t\ttry {\r\n\t\t\t\topen = localStorage.getItem('drafts:open');\r\n\t\t\t\topen = JSON.parse(open) || [];\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.warn('[composer/drafts] Could not read list of open/available drafts');\r\n\t\t\t\topen = [];\r\n\t\t\t}\r\n\t\t\tif (open.length) {\r\n\t\t\t\topen.forEach(function (save_id) {\r\n\t\t\t\t\tdrafts.updateVisibility('open', save_id);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdrafts.migrateGuest();\r\n\t};\r\n\r\n\tfunction resetTimeout() {\r\n\t\tif (saveThrottleId) {\r\n\t\t\tclearTimeout(saveThrottleId);\r\n\t\t\tsaveThrottleId = 0;\r\n\t\t}\r\n\t}\r\n\r\n\t// deprecated, for removal v1.14.x\r\n\tdrafts.getDraft = function (save_id) {\r\n\t\tconsole.warn('[composer/drafts] drafts.getDraft is deprecated! Use drafts.get() instead.');\r\n\t\treturn localStorage.getItem(save_id);\r\n\t};\r\n\r\n\tdrafts.get = function (save_id) {\r\n\t\tvar uid = save_id.split(':')[1];\r\n\t\tvar storage = parseInt(uid, 10) ? localStorage : sessionStorage;\r\n\t\tvar draft = {\r\n\t\t\ttext: storage.getItem(save_id),\r\n\t\t};\r\n\t\t['cid', 'title', 'tags'].forEach(function (key) {\r\n\t\t\tconst value = storage.getItem(save_id + ':' + key);\r\n\t\t\tif (value) {\r\n\t\t\t\tdraft[key] = value;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (!parseInt(uid, 10)) {\r\n\t\t\tdraft.handle = storage.getItem(save_id + ':handle');\r\n\t\t}\r\n\r\n\t\t$(window).trigger('action:composer.drafts.get', {\r\n\t\t\tsave_id: save_id,\r\n\t\t\tdraft: draft,\r\n\t\t\tstorage: storage,\r\n\t\t});\r\n\t\treturn draft;\r\n\t};\r\n\r\n\tfunction saveDraft(postContainer, draftIconEl, postData) {\r\n\t\tif (canSave(app.user.uid ? 'localStorage' : 'sessionStorage') && postData && postData.save_id && postContainer.length) {\r\n\t\t\tconst titleEl = postContainer.find('input.title');\r\n\t\t\tconst title = titleEl && titleEl.val();\r\n\t\t\tvar raw = postContainer.find('textarea').val();\r\n\t\t\tvar storage = app.user.uid ? localStorage : sessionStorage;\r\n\r\n\t\t\tif (postData.hasOwnProperty('cid') && !postData.save_id.endsWith(':cid:' + postData.cid)) {\r\n\t\t\t\t// A new cid was selected, the save_id needs updating\r\n\t\t\t\tdrafts.removeDraft(postData.save_id);\t// First, delete the old draft\r\n\t\t\t\tpostData.save_id = postData.save_id.replace(/cid:\\d+$/, 'cid:' + postData.cid);\t// then create a new save_id\r\n\t\t\t}\r\n\r\n\t\t\tif (raw.length || (title && title.length)) {\r\n\t\t\t\tstorage.setItem(postData.save_id, raw);\r\n\r\n\t\t\t\tif (postData.hasOwnProperty('cid')) {\r\n\t\t\t\t\t// New topic only\r\n\t\t\t\t\tconst tags = postContainer.find('input.tags').val();\r\n\t\t\t\t\tstorage.setItem(postData.save_id + ':tags', tags);\r\n\t\t\t\t\tstorage.setItem(postData.save_id + ':title', title);\r\n\t\t\t\t}\r\n\t\t\t\tif (!app.user.uid) {\r\n\t\t\t\t\tvar handle = postContainer.find('input.handle').val();\r\n\t\t\t\t\tstorage.setItem(postData.save_id + ':handle', handle);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(window).trigger('action:composer.drafts.save', {\r\n\t\t\t\t\tstorage: storage,\r\n\t\t\t\t\tpostData: postData,\r\n\t\t\t\t\tpostContainer: postContainer,\r\n\t\t\t\t});\r\n\t\t\t\tdraftIconEl.toggleClass('active', true);\r\n\t\t\t} else {\r\n\t\t\t\tdrafts.removeDraft(postData.save_id);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdrafts.removeDraft = function (save_id) {\r\n\t\tif (!save_id) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tresetTimeout();\r\n\t\t// Remove save_id from list of open and available drafts\r\n\t\tdrafts.updateVisibility('available', save_id);\r\n\t\tdrafts.updateVisibility('open', save_id);\r\n\r\n\t\tconst keys = Object.keys(localStorage).filter(key => key.startsWith(save_id));\r\n\t\tkeys.forEach(key => localStorage.removeItem(key));\r\n\t};\r\n\r\n\tdrafts.updateVisibility = function (set, save_id, add) {\r\n\t\tif (!canSave(app.user.uid ? 'localStorage' : 'sessionStorage') || !save_id) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar open = [];\r\n\t\ttry {\r\n\t\t\topen = localStorage.getItem('drafts:' + set);\r\n\t\t\topen = open ? JSON.parse(open) : [];\r\n\t\t} catch (e) {\r\n\t\t\tconsole.warn('[composer/drafts] Could not read list of open drafts');\r\n\t\t\topen = [];\r\n\t\t}\r\n\t\tvar idx = open.indexOf(save_id);\r\n\r\n\t\tif (add && idx === -1) {\r\n\t\t\topen.push(save_id);\r\n\t\t} else if (!add && idx !== -1) {\r\n\t\t\topen.splice(idx, 1);\r\n\t\t}\t// otherwise do nothing\r\n\r\n\t\tlocalStorage.setItem('drafts:' + set, JSON.stringify(open));\r\n\t};\r\n\r\n\tdrafts.migrateGuest = function () {\r\n\t\t// If any drafts are made while as guest, and user then logs in, assume control of those drafts\r\n\t\tif (canSave('localStorage') && app.user.uid) {\r\n\t\t\tvar test = /^composer:\\d+:\\w+:\\d+(:\\w+)?$/;\r\n\t\t\tvar keys = Object.keys(sessionStorage).filter(function (key) {\r\n\t\t\t\treturn test.test(key);\r\n\t\t\t});\r\n\t\t\tvar migrated = new Set([]);\r\n\t\t\tvar renamed = keys.map(function (key) {\r\n\t\t\t\tvar parts = key.split(':');\r\n\t\t\t\tparts[1] = app.user.uid;\r\n\r\n\t\t\t\tmigrated.add(parts.slice(0, 4).join(':'));\r\n\t\t\t\treturn parts.join(':');\r\n\t\t\t});\r\n\r\n\t\t\tkeys.forEach(function (key, idx) {\r\n\t\t\t\tlocalStorage.setItem(renamed[idx], sessionStorage.getItem(key));\r\n\t\t\t\tsessionStorage.removeItem(key);\r\n\t\t\t});\r\n\r\n\t\t\tmigrated.forEach(function (save_id) {\r\n\t\t\t\tdrafts.updateVisibility('available', save_id, 1);\r\n\t\t\t});\r\n\r\n\t\t\treturn migrated;\r\n\t\t}\r\n\t};\r\n\r\n\tdrafts.loadOpen = function () {\r\n\t\t// Load drafts if they were open\r\n\t\tvar available;\r\n\t\tvar open = [];\r\n\t\ttry {\r\n\t\t\tavailable = localStorage.getItem('drafts:available');\r\n\t\t\topen = localStorage.getItem('drafts:open');\r\n\t\t\tavailable = JSON.parse(available) || [];\r\n\t\t\topen = JSON.parse(open) || [];\r\n\t\t} catch (e) {\r\n\t\t\tconsole.warn('[composer/drafts] Could not read list of open/available drafts');\r\n\t\t\tavailable = [];\r\n\t\t\topen = [];\r\n\t\t}\r\n\r\n\t\tif (available.length && app.user && app.user.uid !== 0) {\r\n\t\t\t// Deconstruct each save_id and open up composer\r\n\t\t\tavailable.forEach(function (save_id) {\r\n\t\t\t\tif (!save_id) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar saveObj = save_id.split(':');\r\n\t\t\t\tvar uid = saveObj[1];\r\n\t\t\t\tvar type = saveObj[2];\r\n\t\t\t\tvar id = saveObj[3];\r\n\t\t\t\tvar draft = drafts.get(save_id);\r\n\r\n\t\t\t\t// If draft is already open, do nothing\r\n\t\t\t\tif (open.indexOf(save_id) !== -1) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Don't open other peoples' drafts\r\n\t\t\t\tif (parseInt(app.user.uid, 10) !== parseInt(uid, 10)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!draft || (draft.text && draft.title && !draft.text.title && !draft.text.length)) {\r\n\t\t\t\t\t// Empty content, remove from list of open drafts\r\n\t\t\t\t\tdrafts.updateVisibility('available', save_id);\r\n\t\t\t\t\tdrafts.updateVisibility('open', save_id);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\trequire(['composer'], function (composer) {\r\n\t\t\t\t\tif (type === 'cid') {\r\n\t\t\t\t\t\tcomposer.newTopic({\r\n\t\t\t\t\t\t\tcid: id,\r\n\t\t\t\t\t\t\ttitle: draft.title,\r\n\t\t\t\t\t\t\tbody: draft.text,\r\n\t\t\t\t\t\t\ttags: [],\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (type === 'tid') {\r\n\t\t\t\t\t\tsocket.emit('topics.getTopic', id, function (err, topicObj) {\r\n\t\t\t\t\t\t\tif (err) {\r\n\t\t\t\t\t\t\t\treturn app.alertError(err.message);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcomposer.newReply(id, undefined, topicObj.title, draft.text);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (type === 'pid') {\r\n\t\t\t\t\t\tcomposer.editPost(id);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// Feature detection courtesy of: https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API\r\n\tfunction canSave(type) {\r\n\t\tvar storage;\r\n\t\ttry {\r\n\t\t\tstorage = window[type];\r\n\t\t\tvar x = '__storage_test__';\r\n\t\t\tstorage.setItem(x, x);\r\n\t\t\tstorage.removeItem(x);\r\n\t\t\treturn true;\r\n\t\t} catch (e) {\r\n\t\t\treturn e instanceof DOMException && (\r\n\t\t\t\t// everything except Firefox\r\n\t\t\t\te.code === 22 ||\r\n\t\t\t\t// Firefox\r\n\t\t\t\te.code === 1014 ||\r\n\t\t\t\t// test name field too, because code might not be present\r\n\t\t\t\t// everything except Firefox\r\n\t\t\t\te.name === 'QuotaExceededError' ||\r\n\t\t\t\t// Firefox\r\n\t\t\t\te.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\r\n\t\t\t\t// acknowledge QuotaExceededError only if there's something already stored\r\n\t\t\t\t(storage && storage.length !== 0);\r\n\t\t}\r\n\t}\r\n\r\n\treturn drafts;\r\n});\r\n"]}