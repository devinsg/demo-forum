{"version":3,"sources":["public/src/modules/sort.js"],"names":["define","components","module","handleSort","field","method","gotoOnSave","threadSort","get","find","removeClass","currentSetting","config","addClass","$","off","on","refresh","newSetting","params","qs","decodeURIComponent","param","ajaxify","go","this","attr","app","user","uid","socket","emit","err","alertError","message","utils","urlParams","sort"],"mappings":"AAAA,aAGAA,OAAO,QAAS,cAAe,SAAUC,GACxC,IAAIC,KAEJA,EAAOC,WAAa,SAAUC,EAAOC,EAAQC,GAC5C,IAAIC,EAAaN,EAAWO,IAAI,eAChCD,EAAWE,KAAK,KAAKC,YAAY,YACjC,IAAIC,EAAiBJ,EAAWE,KAAK,gBAAkBG,OAAOR,GAAS,MACvEO,EAAeF,KAAK,KAAKI,SAAS,YAElCC,EAAE,QACAC,IAAI,QAAS,+BACbC,GAAG,QAAS,8BAA+B,WAC3C,SAASC,EAAQC,EAAYC,GAC5BP,OAAOR,GAASc,EAChB,IAAIE,EAAKC,mBAAmBP,EAAEQ,MAAMH,IACpCI,QAAQC,GAAGlB,GAAcc,EAAK,IAAMA,EAAK,KAE1C,IAAIF,EAAaJ,EAAEW,MAAMC,KAAK,aAC9B,GAAIC,IAAIC,KAAKC,IAAK,CACjBC,OAAOC,KAAK1B,EAAQa,EAAY,SAAUc,GACzC,GAAIA,EAAK,CACR,OAAOL,IAAIM,WAAWD,EAAIE,SAE3BjB,EAAQC,EAAYiB,MAAMhB,gBAErB,CACN,IAAIiB,EAAYD,MAAMhB,SACtBiB,EAAUC,KAAOnB,EACjBD,EAAQC,EAAYkB,OAKxB,OAAOlC","file":"public/src/modules/sort.js","sourcesContent":["'use strict';\n\n\ndefine('sort', ['components'], function (components) {\n\tvar module = {};\n\n\tmodule.handleSort = function (field, method, gotoOnSave) {\n\t\tvar threadSort = components.get('thread/sort');\n\t\tthreadSort.find('i').removeClass('fa-check');\n\t\tvar currentSetting = threadSort.find('a[data-sort=\"' + config[field] + '\"]');\n\t\tcurrentSetting.find('i').addClass('fa-check');\n\n\t\t$('body')\n\t\t\t.off('click', '[component=\"thread/sort\"] a')\n\t\t\t.on('click', '[component=\"thread/sort\"] a', function () {\n\t\t\t\tfunction refresh(newSetting, params) {\n\t\t\t\t\tconfig[field] = newSetting;\n\t\t\t\t\tvar qs = decodeURIComponent($.param(params));\n\t\t\t\t\tajaxify.go(gotoOnSave + (qs ? '?' + qs : ''));\n\t\t\t\t}\n\t\t\t\tvar newSetting = $(this).attr('data-sort');\n\t\t\t\tif (app.user.uid) {\n\t\t\t\t\tsocket.emit(method, newSetting, function (err) {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treturn app.alertError(err.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t\trefresh(newSetting, utils.params());\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tvar urlParams = utils.params();\n\t\t\t\t\turlParams.sort = newSetting;\n\t\t\t\t\trefresh(newSetting, urlParams);\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\treturn module;\n});\n"]}