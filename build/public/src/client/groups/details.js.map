{"version":3,"sources":["public/src/client/groups/details.js"],"names":["define","memberList","iconSelect","components","coverPhoto","pictureCropper","translator","api","slugify","Details","groupName","init","detailsPage","get","ajaxify","data","group","name","isOwner","prepareSettings","imageData","position","callback","socket","emit","show","title","socketMethod","aspectRatio","NaN","allowSkippingCrop","restrictImageDimension","paramName","paramValue","imageUrlOnServer","startsWith","config","relative_path","Date","now","css","removeCover","handleMemberInvitations","find","addClass","on","btnEl","$","this","userRow","parents","ownerFlagEl","hasClass","uid","attr","action","toUid","err","toggleClass","app","alertError","message","translate","translated","bootbox","confirm","slideUp","remove","update","deleteGroup","put","slug","user","undefined","then","refresh","del","settingsFormEl","labelColorValueEl","textColorValueEl","iconBtn","previewEl","previewIcon","userTitleEl","userTitleEnabledEl","iconValueEl","val","icon","detach","text","value","prepend","customOpts","checked","removeAttr","removeClass","checkboxes","length","settings","serializeObject","each","idx","inputEl","prop","values","pathname","window","location","substr","lastIndexOf","go","alertSuccess","utils","escapeHTML","prompt","response","searchInput","require","autocomplete","event","selected","item","usernames"],"mappings":"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","file":"public/src/client/groups/details.js","sourcesContent":["'use strict';\n\ndefine('forum/groups/details', [\n\t'forum/groups/memberlist',\n\t'iconSelect',\n\t'components',\n\t'coverPhoto',\n\t'pictureCropper',\n\t'translator',\n\t'api',\n\t'slugify',\n], function (memberList, iconSelect, components, coverPhoto, pictureCropper, translator, api, slugify) {\n\tvar Details = {};\n\tvar groupName;\n\n\tDetails.init = function () {\n\t\tvar detailsPage = components.get('groups/container');\n\n\t\tgroupName = ajaxify.data.group.name;\n\n\t\tif (ajaxify.data.group.isOwner) {\n\t\t\tDetails.prepareSettings();\n\n\t\t\tcoverPhoto.init(\n\t\t\t\tcomponents.get('groups/cover'),\n\t\t\t\tfunction (imageData, position, callback) {\n\t\t\t\t\tsocket.emit('groups.cover.update', {\n\t\t\t\t\t\tgroupName: groupName,\n\t\t\t\t\t\timageData: imageData,\n\t\t\t\t\t\tposition: position,\n\t\t\t\t\t}, callback);\n\t\t\t\t},\n\t\t\t\tfunction () {\n\t\t\t\t\tpictureCropper.show({\n\t\t\t\t\t\ttitle: '[[groups:upload-group-cover]]',\n\t\t\t\t\t\tsocketMethod: 'groups.cover.update',\n\t\t\t\t\t\taspectRatio: NaN,\n\t\t\t\t\t\tallowSkippingCrop: true,\n\t\t\t\t\t\trestrictImageDimension: false,\n\t\t\t\t\t\tparamName: 'groupName',\n\t\t\t\t\t\tparamValue: groupName,\n\t\t\t\t\t}, function (imageUrlOnServer) {\n\t\t\t\t\t\timageUrlOnServer = (!imageUrlOnServer.startsWith('http') ? config.relative_path : '') + imageUrlOnServer + '?' + Date.now();\n\t\t\t\t\t\tcomponents.get('groups/cover').css('background-image', 'url(' + imageUrlOnServer + ')');\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tremoveCover\n\t\t\t);\n\t\t}\n\n\t\tmemberList.init();\n\n\t\thandleMemberInvitations();\n\n\t\tcomponents.get('groups/activity').find('.content img:not(.not-responsive)').addClass('img-responsive');\n\n\t\tdetailsPage.on('click', '[data-action]', function () {\n\t\t\tvar btnEl = $(this);\n\t\t\tvar userRow = btnEl.parents('[data-uid]');\n\t\t\tvar ownerFlagEl = userRow.find('.member-name > i');\n\t\t\tvar isOwner = !ownerFlagEl.hasClass('invisible');\n\t\t\tvar uid = userRow.attr('data-uid');\n\t\t\tvar action = btnEl.attr('data-action');\n\n\t\t\tswitch (action) {\n\t\t\t\tcase 'toggleOwnership':\n\t\t\t\t\tsocket.emit('groups.' + (isOwner ? 'rescind' : 'grant'), {\n\t\t\t\t\t\ttoUid: uid,\n\t\t\t\t\t\tgroupName: groupName,\n\t\t\t\t\t}, function (err) {\n\t\t\t\t\t\tif (!err) {\n\t\t\t\t\t\t\townerFlagEl.toggleClass('invisible');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tapp.alertError(err.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'kick':\n\t\t\t\t\ttranslator.translate('[[groups:details.kick_confirm]]', function (translated) {\n\t\t\t\t\t\tbootbox.confirm(translated, function (confirm) {\n\t\t\t\t\t\t\tif (!confirm) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tsocket.emit('groups.kick', {\n\t\t\t\t\t\t\t\tuid: uid,\n\t\t\t\t\t\t\t\tgroupName: groupName,\n\t\t\t\t\t\t\t}, function (err) {\n\t\t\t\t\t\t\t\tif (!err) {\n\t\t\t\t\t\t\t\t\tuserRow.slideUp().remove();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tapp.alertError(err.message);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'update':\n\t\t\t\t\tDetails.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'delete':\n\t\t\t\t\tDetails.deleteGroup();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'join':\t// intentional fall-throughs!\n\t\t\t\t\tapi.put('/groups/' + ajaxify.data.group.slug + '/membership/' + (uid || app.user.uid), undefined).then(() => ajaxify.refresh());\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'leave':\n\t\t\t\t\tapi.del('/groups/' + ajaxify.data.group.slug + '/membership/' + (uid || app.user.uid), undefined).then(() => ajaxify.refresh());\n\t\t\t\t\tbreak;\n\n\t\t\t\t// TODO (14/10/2020): rewrite these to use api module and merge with above 2 case blocks\n\t\t\t\tcase 'accept':\t// intentional fall-throughs!\n\t\t\t\tcase 'reject':\n\t\t\t\tcase 'issueInvite':\n\t\t\t\tcase 'rescindInvite':\n\t\t\t\tcase 'acceptInvite':\n\t\t\t\tcase 'rejectInvite':\n\t\t\t\tcase 'acceptAll':\n\t\t\t\tcase 'rejectAll':\n\t\t\t\t\tsocket.emit('groups.' + action, {\n\t\t\t\t\t\ttoUid: uid,\n\t\t\t\t\t\tgroupName: groupName,\n\t\t\t\t\t}, function (err) {\n\t\t\t\t\t\tif (!err) {\n\t\t\t\t\t\t\tajaxify.refresh();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tapp.alertError(err.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t};\n\n\tDetails.prepareSettings = function () {\n\t\tvar settingsFormEl = components.get('groups/settings');\n\t\tvar labelColorValueEl = settingsFormEl.find('[name=\"labelColor\"]');\n\t\tvar textColorValueEl = settingsFormEl.find('[name=\"textColor\"]');\n\t\tvar iconBtn = settingsFormEl.find('[data-action=\"icon-select\"]');\n\t\tvar previewEl = settingsFormEl.find('.label');\n\t\tvar previewIcon = previewEl.find('i');\n\t\tvar userTitleEl = settingsFormEl.find('[name=\"userTitle\"]');\n\t\tvar userTitleEnabledEl = settingsFormEl.find('[name=\"userTitleEnabled\"]');\n\t\tvar iconValueEl = settingsFormEl.find('[name=\"icon\"]');\n\n\t\tlabelColorValueEl.on('input', function () {\n\t\t\tpreviewEl.css('background-color', labelColorValueEl.val());\n\t\t});\n\n\t\ttextColorValueEl.on('input', function () {\n\t\t\tpreviewEl.css('color', textColorValueEl.val());\n\t\t});\n\n\t\t// Add icon selection interface\n\t\ticonBtn.on('click', function () {\n\t\t\ticonSelect.init(previewIcon, function () {\n\t\t\t\ticonValueEl.val(previewIcon.val());\n\t\t\t});\n\t\t});\n\n\t\t// If the user title changes, update that too\n\t\tuserTitleEl.on('keyup', function () {\n\t\t\tvar icon = previewIcon.detach();\n\t\t\tpreviewEl.text(' ' + (this.value || settingsFormEl.find('#name').val()));\n\t\t\tpreviewEl.prepend(icon);\n\t\t});\n\n\t\t// Disable user title customisation options if the the user title itself is disabled\n\t\tuserTitleEnabledEl.on('change', function () {\n\t\t\tvar customOpts = components.get('groups/userTitleOption');\n\n\t\t\tif (this.checked) {\n\t\t\t\tcustomOpts.removeAttr('disabled');\n\t\t\t\tpreviewEl.removeClass('hide');\n\t\t\t} else {\n\t\t\t\tcustomOpts.attr('disabled', 'disabled');\n\t\t\t\tpreviewEl.addClass('hide');\n\t\t\t}\n\t\t});\n\t};\n\n\tDetails.update = function () {\n\t\tvar settingsFormEl = components.get('groups/settings');\n\t\tvar checkboxes = settingsFormEl.find('input[type=\"checkbox\"][name]');\n\n\t\tif (settingsFormEl.length) {\n\t\t\tvar settings = settingsFormEl.serializeObject();\n\n\t\t\t// Fix checkbox values\n\t\t\tcheckboxes.each(function (idx, inputEl) {\n\t\t\t\tinputEl = $(inputEl);\n\t\t\t\tif (inputEl.length) {\n\t\t\t\t\tsettings[inputEl.attr('name')] = inputEl.prop('checked');\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsocket.emit('groups.update', {\n\t\t\t\tgroupName: groupName,\n\t\t\t\tvalues: settings,\n\t\t\t}, function (err) {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn app.alertError(err.message);\n\t\t\t\t}\n\n\t\t\t\tif (settings.name) {\n\t\t\t\t\tvar pathname = window.location.pathname;\n\t\t\t\t\tpathname = pathname.substr(1, pathname.lastIndexOf('/'));\n\t\t\t\t\tajaxify.go(pathname + slugify(settings.name));\n\t\t\t\t} else {\n\t\t\t\t\tajaxify.refresh();\n\t\t\t\t}\n\n\t\t\t\tapp.alertSuccess('[[groups:event.updated]]');\n\t\t\t});\n\t\t}\n\t};\n\n\tDetails.deleteGroup = function () {\n\t\tbootbox.confirm('Are you sure you want to delete the group: ' + utils.escapeHTML(groupName), function (confirm) {\n\t\t\tif (confirm) {\n\t\t\t\tbootbox.prompt('Please enter the name of this group in order to delete it:', function (response) {\n\t\t\t\t\tif (response === groupName) {\n\t\t\t\t\t\tsocket.emit('groups.delete', {\n\t\t\t\t\t\t\tgroupName: groupName,\n\t\t\t\t\t\t}, function (err) {\n\t\t\t\t\t\t\tif (!err) {\n\t\t\t\t\t\t\t\tapp.alertSuccess('[[groups:event.deleted, ' + utils.escapeHTML(groupName) + ']]');\n\t\t\t\t\t\t\t\tajaxify.go('groups');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tapp.alertError(err.message);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\tfunction handleMemberInvitations() {\n\t\tif (!ajaxify.data.group.isOwner) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar searchInput = $('[component=\"groups/members/invite\"]');\n\t\trequire(['autocomplete'], function (autocomplete) {\n\t\t\tautocomplete.user(searchInput, function (event, selected) {\n\t\t\t\tsocket.emit('groups.issueInvite', {\n\t\t\t\t\ttoUid: selected.item.user.uid,\n\t\t\t\t\tgroupName: ajaxify.data.group.name,\n\t\t\t\t}, function (err) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treturn app.alertError(err.message);\n\t\t\t\t\t}\n\t\t\t\t\tajaxify.refresh();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\t$('[component=\"groups/members/bulk-invite-button\"]').on('click', function () {\n\t\t\tvar usernames = $('[component=\"groups/members/bulk-invite\"]').val();\n\t\t\tif (!usernames) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tsocket.emit('groups.issueMassInvite', {\n\t\t\t\tusernames: usernames,\n\t\t\t\tgroupName: ajaxify.data.group.name,\n\t\t\t}, function (err) {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn app.alertError(err.message);\n\t\t\t\t}\n\t\t\t\tajaxify.refresh();\n\t\t\t});\n\t\t\treturn false;\n\t\t});\n\t}\n\n\tfunction removeCover() {\n\t\ttranslator.translate('[[groups:remove_group_cover_confirm]]', function (translated) {\n\t\t\tbootbox.confirm(translated, function (confirm) {\n\t\t\t\tif (!confirm) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tsocket.emit('groups.cover.remove', {\n\t\t\t\t\tgroupName: ajaxify.data.group.name,\n\t\t\t\t}, function (err) {\n\t\t\t\t\tif (!err) {\n\t\t\t\t\t\tajaxify.refresh();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tapp.alertError(err.message);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\treturn Details;\n});\n"]}