{"version":3,"sources":["public/src/client/category/tools.js"],"names":["define","topicSelect","components","translator","CategoryTools","init","updateDropdownOptions","handlePinnedTopicSort","get","on","categoryCommand","getSelectedTids","tids","length","app","alertError","socket","emit","onCommandComplete","err","message","alertSuccess","forEach","tid","$","addClass","require","move","cid","ajaxify","data","template","category","refresh","merge","addTopic","removeListeners","setDeleteState","onTopicPurged","setLockedState","setPinnedState","onTopicMoved","command","translate","msg","bootbox","confirm","onDeletePurgeComplete","removeListener","closeDropDown","find","trigger","unselectAll","isAnyDeleted","isAny","isTopicDeleted","areAllDeleted","areAll","isAnyPinned","isTopicPinned","isAnyLocked","isTopicLocked","toggleClass","method","i","getTopicEl","hasClass","topic","isDeleted","isPinned","isLocked","remove","topics","numPinned","reduce","memo","pinned","user","isAdmin","isMod","loadJQueryUI","topicListEl","filter","e","parents","sortable","handle","items","update","pinnedTopics","each","index","element","push","attr","order"],"mappings":"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","file":"public/src/client/category/tools.js","sourcesContent":["\n'use strict';\n\n\ndefine('forum/category/tools', [\n\t'topicSelect',\n\t'components',\n\t'translator',\n], function (topicSelect, components, translator) {\n\tvar CategoryTools = {};\n\n\tCategoryTools.init = function () {\n\t\ttopicSelect.init(updateDropdownOptions);\n\n\t\thandlePinnedTopicSort();\n\n\t\tcomponents.get('topic/delete').on('click', function () {\n\t\t\tcategoryCommand('delete', topicSelect.getSelectedTids());\n\t\t\treturn false;\n\t\t});\n\n\t\tcomponents.get('topic/restore').on('click', function () {\n\t\t\tcategoryCommand('restore', topicSelect.getSelectedTids());\n\t\t\treturn false;\n\t\t});\n\n\t\tcomponents.get('topic/purge').on('click', function () {\n\t\t\tcategoryCommand('purge', topicSelect.getSelectedTids());\n\t\t\treturn false;\n\t\t});\n\n\t\tcomponents.get('topic/lock').on('click', function () {\n\t\t\tvar tids = topicSelect.getSelectedTids();\n\t\t\tif (!tids.length) {\n\t\t\t\treturn app.alertError('[[error:no-topics-selected]]');\n\t\t\t}\n\t\t\tsocket.emit('topics.lock', { tids: tids }, onCommandComplete);\n\t\t\treturn false;\n\t\t});\n\n\t\tcomponents.get('topic/unlock').on('click', function () {\n\t\t\tvar tids = topicSelect.getSelectedTids();\n\t\t\tif (!tids.length) {\n\t\t\t\treturn app.alertError('[[error:no-topics-selected]]');\n\t\t\t}\n\t\t\tsocket.emit('topics.unlock', { tids: tids }, onCommandComplete);\n\t\t\treturn false;\n\t\t});\n\n\t\tcomponents.get('topic/pin').on('click', function () {\n\t\t\tvar tids = topicSelect.getSelectedTids();\n\t\t\tif (!tids.length) {\n\t\t\t\treturn app.alertError('[[error:no-topics-selected]]');\n\t\t\t}\n\t\t\tsocket.emit('topics.pin', { tids: tids }, onCommandComplete);\n\t\t\treturn false;\n\t\t});\n\n\t\tcomponents.get('topic/unpin').on('click', function () {\n\t\t\tvar tids = topicSelect.getSelectedTids();\n\t\t\tif (!tids.length) {\n\t\t\t\treturn app.alertError('[[error:no-topics-selected]]');\n\t\t\t}\n\t\t\tsocket.emit('topics.unpin', { tids: tids }, onCommandComplete);\n\t\t\treturn false;\n\t\t});\n\n\t\tcomponents.get('topic/mark-unread-for-all').on('click', function () {\n\t\t\tvar tids = topicSelect.getSelectedTids();\n\t\t\tif (!tids.length) {\n\t\t\t\treturn app.alertError('[[error:no-topics-selected]]');\n\t\t\t}\n\t\t\tsocket.emit('topics.markAsUnreadForAll', tids, function (err) {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn app.alertError(err.message);\n\t\t\t\t}\n\t\t\t\tapp.alertSuccess('[[topic:markAsUnreadForAll.success]]');\n\t\t\t\ttids.forEach(function (tid) {\n\t\t\t\t\t$('[component=\"category/topic\"][data-tid=\"' + tid + '\"]').addClass('unread');\n\t\t\t\t});\n\t\t\t\tonCommandComplete();\n\t\t\t});\n\t\t\treturn false;\n\t\t});\n\n\t\tcomponents.get('topic/move').on('click', function () {\n\t\t\trequire(['forum/topic/move'], function (move) {\n\t\t\t\tvar tids = topicSelect.getSelectedTids();\n\n\t\t\t\tif (!tids.length) {\n\t\t\t\t\treturn app.alertError('[[error:no-topics-selected]]');\n\t\t\t\t}\n\t\t\t\tmove.init(tids, null, onCommandComplete);\n\t\t\t});\n\n\t\t\treturn false;\n\t\t});\n\n\t\tcomponents.get('topic/move-all').on('click', function () {\n\t\t\tvar cid = ajaxify.data.cid;\n\t\t\tif (!ajaxify.data.template.category) {\n\t\t\t\treturn app.alertError('[[error:invalid-data]]');\n\t\t\t}\n\t\t\trequire(['forum/topic/move'], function (move) {\n\t\t\t\tmove.init(null, cid, function (err) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treturn app.alertError(err.message);\n\t\t\t\t\t}\n\n\t\t\t\t\tajaxify.refresh();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\tcomponents.get('topic/merge').on('click', function () {\n\t\t\tvar tids = topicSelect.getSelectedTids();\n\t\t\trequire(['forum/topic/merge'], function (merge) {\n\t\t\t\tmerge.init(function () {\n\t\t\t\t\tif (tids.length) {\n\t\t\t\t\t\ttids.forEach(function (tid) {\n\t\t\t\t\t\t\tmerge.addTopic(tid);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\tCategoryTools.removeListeners();\n\t\tsocket.on('event:topic_deleted', setDeleteState);\n\t\tsocket.on('event:topic_restored', setDeleteState);\n\t\tsocket.on('event:topic_purged', onTopicPurged);\n\t\tsocket.on('event:topic_locked', setLockedState);\n\t\tsocket.on('event:topic_unlocked', setLockedState);\n\t\tsocket.on('event:topic_pinned', setPinnedState);\n\t\tsocket.on('event:topic_unpinned', setPinnedState);\n\t\tsocket.on('event:topic_moved', onTopicMoved);\n\t};\n\n\tfunction categoryCommand(command, tids) {\n\t\tif (!tids.length) {\n\t\t\treturn app.alertError('[[error:no-topics-selected]]');\n\t\t}\n\n\t\ttranslator.translate('[[topic:thread_tools.' + command + '_confirm]]', function (msg) {\n\t\t\tbootbox.confirm(msg, function (confirm) {\n\t\t\t\tif (!confirm) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tsocket.emit('topics.' + command, { tids: tids }, onDeletePurgeComplete);\n\t\t\t});\n\t\t});\n\t}\n\n\tCategoryTools.removeListeners = function () {\n\t\tsocket.removeListener('event:topic_deleted', setDeleteState);\n\t\tsocket.removeListener('event:topic_restored', setDeleteState);\n\t\tsocket.removeListener('event:topic_purged', onTopicPurged);\n\t\tsocket.removeListener('event:topic_locked', setLockedState);\n\t\tsocket.removeListener('event:topic_unlocked', setLockedState);\n\t\tsocket.removeListener('event:topic_pinned', setPinnedState);\n\t\tsocket.removeListener('event:topic_unpinned', setPinnedState);\n\t\tsocket.removeListener('event:topic_moved', onTopicMoved);\n\t};\n\n\tfunction closeDropDown() {\n\t\t$('.thread-tools.open').find('.dropdown-toggle').trigger('click');\n\t}\n\n\tfunction onCommandComplete(err) {\n\t\tif (err) {\n\t\t\treturn app.alertError(err.message);\n\t\t}\n\t\tcloseDropDown();\n\t\ttopicSelect.unselectAll();\n\t}\n\n\tfunction onDeletePurgeComplete(err) {\n\t\tif (err) {\n\t\t\treturn app.alertError(err.message);\n\t\t}\n\t\tcloseDropDown();\n\t\tupdateDropdownOptions();\n\t}\n\n\tfunction updateDropdownOptions() {\n\t\tvar tids = topicSelect.getSelectedTids();\n\t\tvar isAnyDeleted = isAny(isTopicDeleted, tids);\n\t\tvar areAllDeleted = areAll(isTopicDeleted, tids);\n\t\tvar isAnyPinned = isAny(isTopicPinned, tids);\n\t\tvar isAnyLocked = isAny(isTopicLocked, tids);\n\n\t\tcomponents.get('topic/delete').toggleClass('hidden', isAnyDeleted);\n\t\tcomponents.get('topic/restore').toggleClass('hidden', !isAnyDeleted);\n\t\tcomponents.get('topic/purge').toggleClass('hidden', !areAllDeleted);\n\n\t\tcomponents.get('topic/lock').toggleClass('hidden', isAnyLocked);\n\t\tcomponents.get('topic/unlock').toggleClass('hidden', !isAnyLocked);\n\n\t\tcomponents.get('topic/pin').toggleClass('hidden', isAnyPinned);\n\t\tcomponents.get('topic/unpin').toggleClass('hidden', !isAnyPinned);\n\t}\n\n\tfunction isAny(method, tids) {\n\t\tfor (var i = 0; i < tids.length; i += 1) {\n\t\t\tif (method(tids[i])) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction areAll(method, tids) {\n\t\tfor (var i = 0; i < tids.length; i += 1) {\n\t\t\tif (!method(tids[i])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tfunction isTopicDeleted(tid) {\n\t\treturn getTopicEl(tid).hasClass('deleted');\n\t}\n\n\tfunction isTopicLocked(tid) {\n\t\treturn getTopicEl(tid).hasClass('locked');\n\t}\n\n\tfunction isTopicPinned(tid) {\n\t\treturn getTopicEl(tid).hasClass('pinned');\n\t}\n\n\tfunction getTopicEl(tid) {\n\t\treturn components.get('category/topic', 'tid', tid);\n\t}\n\n\tfunction setDeleteState(data) {\n\t\tvar topic = getTopicEl(data.tid);\n\t\ttopic.toggleClass('deleted', data.isDeleted);\n\t\ttopic.find('[component=\"topic/locked\"]').toggleClass('hide', !data.isDeleted);\n\t}\n\n\tfunction setPinnedState(data) {\n\t\tvar topic = getTopicEl(data.tid);\n\t\ttopic.toggleClass('pinned', data.isPinned);\n\t\ttopic.find('[component=\"topic/pinned\"]').toggleClass('hide', !data.isPinned);\n\t\tajaxify.refresh();\n\t}\n\n\tfunction setLockedState(data) {\n\t\tvar topic = getTopicEl(data.tid);\n\t\ttopic.toggleClass('locked', data.isLocked);\n\t\ttopic.find('[component=\"topic/locked\"]').toggleClass('hide', !data.isLocked);\n\t}\n\n\tfunction onTopicMoved(data) {\n\t\tgetTopicEl(data.tid).remove();\n\t}\n\n\tfunction onTopicPurged(data) {\n\t\tgetTopicEl(data.tid).remove();\n\t}\n\n\tfunction handlePinnedTopicSort() {\n\t\tif (!ajaxify.data.topics || !ajaxify.data.template.category) {\n\t\t\treturn;\n\t\t}\n\t\tvar numPinned = ajaxify.data.topics.reduce(function (memo, topic) {\n\t\t\tmemo = topic.pinned ? memo += 1 : memo;\n\t\t\treturn memo;\n\t\t}, 0);\n\n\t\tif ((!app.user.isAdmin && !app.user.isMod) || numPinned < 2) {\n\t\t\treturn;\n\t\t}\n\n\t\tapp.loadJQueryUI(function () {\n\t\t\tvar topicListEl = $('[component=\"category\"]').filter(function (i, e) {\n\t\t\t\treturn !$(e).parents('[widget-area],[data-widget-area]').length;\n\t\t\t});\n\t\t\ttopicListEl.sortable({\n\t\t\t\thandle: '[component=\"topic/pinned\"]',\n\t\t\t\titems: '[component=\"category/topic\"].pinned',\n\t\t\t\tupdate: function () {\n\t\t\t\t\tvar data = [];\n\n\t\t\t\t\tvar pinnedTopics = topicListEl.find('[component=\"category/topic\"].pinned');\n\t\t\t\t\tpinnedTopics.each(function (index, element) {\n\t\t\t\t\t\tdata.push({ tid: $(element).attr('data-tid'), order: pinnedTopics.length - index - 1 });\n\t\t\t\t\t});\n\n\t\t\t\t\tsocket.emit('topics.orderPinnedTopics', data, function (err) {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treturn app.alertError(err.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\treturn CategoryTools;\n});\n"]}